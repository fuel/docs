<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../assets/css/combined.css">
	<link rel="shortcut icon" href="./../favicon.ico" />
	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../';
	</script>
	<script src="./../assets/js/combined.js"></script>
	<title>Environments - General - FuelPHP Documentation</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<h1>
					<strong>FuelPHP, a PHP 5.3 Framework</strong>
					Documentation
				</h1>

				<form id="google_search">
					<p>
						<span id="search_clear">&nbsp;</span>
						<input type="submit" name="search_submit" id="search_submit" value="search" />
						<input type="text" value="" id="search_input" name="search_input" />
					</p>
				</form>
			</div>
			<nav>

				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">table of contents</a>
			<div class="clear"></div>
		</header>

		<div id="cse">
			<div id="cse_point"></div>
			<div id="cse_content"></div>
		</div>

		<div id="main">

			<h2>Environments</h2>

			<p>
				The support of environments helps FuelPHP and your app to make decisions based on the environment setting.
				FuelPHP itself uses the environment setting to load/overwrite additional config setting based on which
				environment is currently active.
			</p>

			<h3 id="possible_envs">Environments list</h3>

			<p>
				FuelPHP has four predefined environments.
			</p>

			<ul>
				<li>
					<strong>\Fuel::DEVELOPMENT</strong><br/>
					The development environment.
				</li>
				<li>
					<strong>\Fuel::TEST</strong><br/>
					The test environment.
				</li>
				<li>
					<strong>\Fuel::STAGE</strong><br/>
					The staging environment.
				</li>
				<li>
					<strong>\Fuel::PRODUCTION</strong><br/>
					The production environment.
				</li>
			</ul>

			<h3 id="setting_env">Set Your Environment</h3>

			<p>
				Setting your environment is done by setting the <em>FUEL_ENV</em> server var or manually changing the
				setting in <em>fuel/app/bootstrap.php</em>.
			</p>

			<pre class="php"><code>// Inside app/bootstrap.php

/**
 * Your environment.  Can be set to any of the following:
 *
 * Fuel::DEVELOPMENT
 * Fuel::TEST
 * Fuel::STAGE
 * Fuel::PRODUCTION
 */
Fuel::$env = (isset($_SERVER['FUEL_ENV']) ? $_SERVER['FUEL_ENV'] : Fuel::DEVELOPMENT);</code></pre>

			<h3 id="env_config">Environments and Config</h3>

			<p>
				Based on the environment the app is set to, the Config class looks for environment-specific config files.
				The config class will look for the same config file name in a directory that's named after the current environment.
				Here is an example to illustrate this:
			</p>

			<pre class="plain"><code>app/
  config/
    stuff.php
      development/
        stuff.php
      production/
        stuff.php</code></pre>

			<p>
				When your environment is set to <kbd>\Fuel::DEVELOPMENT</kbd>, the settings from <em>stuff.php</em> are merged with <em>development/stuff.php</em>.
				If the environment setting is set to any other than <kbd>\Fuel::DEVELOPMENT</kbd>, the extra config file is not loaded. The same goes
				for any other environment setting you might use.
			</p>

			<p>
				A real-life example for this is the database configuration. There are no default configuration settings (this is possibly
				very dangerous).  There are only environment-specific config settings.
			</p>

			<h4 id="env_config_loading_order">Package and Module Config Loading Order</h4>
				<p>
					Packages and Modules have their own configuration files which can be be overridden based on the current environment. Remember that configs loaded later can override values in earlier loaded configs.
				</p>

			<h5 id="env_config_loading_order_package">Packages</h5>

			<pre class="php"><code>/**
 * Locating a package config
 * 
 * Loading Order assuming FUEL::TEST:
 * 
 * 1. app/packages/mypackage/config/stuff.php
 * 2. app/config/stuff.php
 * 3. app/packages/mypackage/config/test/stuff.php *note below
 * 4. app/config/test/stuff.php
 */
Config::get('mypackage.stuff');</code></pre>

			<p class="note">When Fuel looks for config files in a package's own directory, it looks through <em>ALL</em> packages in the order that they were loaded.  If a package loaded after your package has a config file by the same name, it can override the config of the former package.</p>

			<h5 id="env_config_loading_order_module">Modules</h5>

			<pre class="php"><code>/**
 * Locating a module config
 * 
 * Loading Order assuming FUEL::TEST:
 * 
 * 1. app/modules/mymodule/config/stuff.php
 * 2. app/modules/mymodule/config/test/stuff.php
 * 3. app/config/test/modules/mymodule/stuff.php
 */
Config::get('mymodule::stuff');</code></pre>


			<h3 id="env_apache">Using Apache configuration</h3>

			<p>
				You can use the Apache configuration statement <strong>SetEnv</strong> to set the environment your application should run in.
				In most cases this is easier then using an environment variable, and in some cases the only option if you don't have commandline
				access to your server.
			</p>

			<pre class="php"><code>// run this application in production mode
SetEnv FUEL_ENV PRODUCTION</code></pre>

			<p class="note">Both the variable name <strong>FUEL_ENV</strong> and the environment need to be specified in UPPERCASE.</p>

		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2012 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
			</p>
		</footer>
	</div>
</body>
</html>
