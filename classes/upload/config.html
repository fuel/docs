<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../../assets/css/combined.css?20190627">
	<link rel="shortcut icon" href="./../../favicon.ico" />
	<script src="https://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../../';
		var class_prefix = "Upload::";
	</script>
	<script src="./../../assets/js/combined.js?20190627"></script>
	<title>Upload 設定 - クラス - FuelPHP ドキュメント</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<div id="cse">
					<gcse:searchbox-only newWindow="true"></gcse:searchbox-only>
				</div>
				<h1>
					<a href="https://fuelphp.com"><img height="37px" width="147px" src="./../../assets/img/fuel.png" /></a>
					<strong>Documentation</strong>
				</h1>

			</div>
			<nav>
				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">目次</a>
			<div class="clear"></div>
		</header>

		<div id="main">

			<h2>Upload クラス</h2>

			<p>
				Upload クラスは、アプリケーションにアップロードされたファイルを安全に処理することを可能にします。
				様々な方法でアップロードをフィルタすることができます。目的のファイル名を定義したり、ファイルサイズやファイル名の長さでフィルタしたりできます。</p>


			<section>
				<h3 id="configuration">設定</h3>

				<p>Upload クラスは、<kbd>fuel/core/config/upload.php</kbd> 設定ファイルで設定します。デフォルト設定されています。設定を変更したい場合は、設定ファイルをアプリケーションディレクトリにコピーし、 そのファイルを変更してください。</p>
				<p>以下の設定が定義されています。</p>
				<table class="config">
					<tbody>
						<tr class="header">
							<th>パラメータ</th>
							<th>型</th>
							<th>デフォルト</th>
							<th>説明</th>
						</tr>
						<tr>
							<th>auto_process</th>
							<td>boolean</td>
							<td><pre class="php"><code>true</code></pre></td>
							<td>
								true の場合、 Upload クラスを使用するときに、設定ファイルの設定を使用してアップロードされたファイルを検証します。
							</td>
						</tr>
						<tr>
							<th>max_size</th>
							<td>integer</td>
							<td><pre class="php"><code>0</code></pre></td>
							<td>
								それぞれのファイルアップロードの最大サイズをバイトで指定する。制限無にする場合は、この値を 0 にする。
							</td>
						</tr>
						<tr>
							<th>ext_whitelist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可されるファイル拡張子の配列。空または未定義の場合、すべての拡張子を許可する。
								拡張子は小文字で定義する必要がある。拡張子大文字のファイルがアップロードされた場合、
								小文字の拡張子と照合される。
							</td>
						</tr>
						<tr>
							<th>ext_blacklist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可しないファイル拡張子の配列。空または未定義の場合、すべての拡張子を許可する。
								拡張子は小文字で定義する必要がある。拡張子大文字のファイルがアップロードされた場合、
								小文字の拡張子と照合される。
							</td>
						</tr>
						<tr>
							<th>type_whitelist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可されるファイルタイプの配列。空または未定義の場合、すべてのファイルタイプを許可する。
								ファイルタイプは、mimetype のスラッシュより前の部分である。mimetype が "text/plain" の場合、配列に "text" を追加すると、このファイルタイプが許可される。
							</td>
						</tr>
						<tr>
							<th>type_blacklist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可しないファイルタイプの配列。空または未定義の場合、すべてのファイルタイプを許可する。
							</td>
						</tr>
						<tr>
							<th>mime_whitelist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可される mimetype の配列。 空または未定義の場合、すべての mimetype を許可する。
							</td>
						</tr>
						<tr>
							<th>mime_blacklist</th>
							<td>array</td>
							<td><pre class="php"><code>array()</code></pre></td>
							<td>
								許可しない mimetype の配列。 空または未定義の場合、すべての mimetype を許可する。
							</td>
						</tr>
						<tr>
							<th>prefix</th>
							<td>string</td>
							<td><pre class="php"><code>''</code></pre></td>
							<td>
								アップロードされたファイルを保存するときに、この文字列をファイル名の先頭に付加する。
							</td>
						</tr>
						<tr>
							<th>suffix</th>
							<td>string</td>
							<td><pre class="php"><code>''</code></pre></td>
							<td>
								アップロードされたファイルを保存するときに、この文字列をファイル名の末尾に付加する。
							</td>
						</tr>
						<tr>
							<th>extension</th>
							<td>string</td>
							<td><pre class="php"><code>''</code></pre></td>
							<td>
								アップロードされたファイルを保存するときに、ファイル名の拡張子をこの文字列に置き換える。
							</td>
						</tr>
						<tr>
							<th>path</th>
							<td>string</td>
							<td><pre class="php"><code>''</code></pre></td>
							<td>
								アップロードされたファイルを保存するパス。
							</td>
						</tr>
						<tr>
							<th>create_path</th>
							<td>boolean</td>
							<td><pre class="php"><code>true</code></pre></td>
							<td>
								true の場合、定義されたパスが存在しなければ作成する。 
								Upload クラスは再帰的にディレクトリを作成することをサポートする。パーミッションが適切に設定されている場合、任意のパスが作成できる。
							</td>
						</tr>
						<tr>
							<th>path_chmod</th>
							<td>integer</td>
							<td><pre class="php"><code>0777</code></pre></td>
							<td>
								作成されたパスのパーミッション。先頭に 0 を置き、8 進数で定義する。
							</td>
						</tr>
						<tr>
							<th>file_chmod</th>
							<td>integer</td>
							<td><pre class="php"><code>0666</code></pre></td>
							<td>
								定義されたパスに、アップロードされたファイルを保存するときのファイルのパーミッション。先頭に 0 を置き、8 進数で定義する。
							</td>
						</tr>
						<tr>
							<th>auto_rename</th>
							<td>boolean</td>
							<td><pre class="php"><code>true</code></pre></td>
							<td>
								true の場合、指定したパスに同名のファイルが既に存在するとき、ファイル名の末尾に連番を付加する。連番は 1 から順に割り振る。
							</td>
						</tr>
						<tr>
							<th>overwrite</th>
							<td>boolean</td>
							<td><pre class="php"><code>false</code></pre></td>
							<td>
								true の場合、同名のファイルが既に存在するとき、上書きする。ただし 'auto_rename' が true の場合は、この設定は無視される。
							</td>
						</tr>
						<tr>
							<th>randomize</th>
							<td>boolean</td>
							<td><pre class="php"><code>false</code></pre></td>
							<td>
								true の場合、ファイル名は 32 桁のランダム文字 (MD5 文字列) が割り当てられる。他の設定は有効。
							</td>
						</tr>
						<tr>
							<th>normalize</th>
							<td>boolean</td>
							<td><pre class="php"><code>false</code></pre></td>
							<td>
								true の場合、ファイル名は ASCII に変換され、スペースはアンダースコアに変換される。
							</td>
						</tr>
						<tr>
							<th>normalize_separator</th>
							<td>string</td>
							<td><pre class="php"><code>'_'</code></pre></td>
							<td>
								normalize を <code>true</code> に設定した場合、スペースを変換する文字 (デフォルトではアンダースコア) を指定する。
							</td>
						</tr>
						<tr>
							<th>max_length</th>
							<td>integer</td>
							<td><pre class="php"><code>0</code></pre></td>
							<td>
								ファイル名の最大の長さ。ファイル名に関するオプションすべてを処理した後に判定する。制限無にする場合は、このパラメータを 0 にする。
							</td>
						</tr>
						<tr>
							<th>new_name</th>
							<td>string</td>
							<td><em>none</em></td>
							<td>
								<p>
									新しいファイル名。この設定はデフォルトでは設定されていないが、<em>Upload::process</em> で提供されている。新しいファイル名は prefix と suffix を上書きしない。
								</p>
								<p class="note" style="margin-bottom: 0;">
									<strong>注意:</strong> 複数のファイルをアップロードするとき、新しいファイル名を使用する場合は auto_rename を必ず true に設定する。
								</p>
							</td>
						</tr>
						<tr>
							<th>change_case</th>
							<td>boolean</td>
							<td><em>false</em></td>
							<td>
								<p>
									ファイル名の大文字小文字を指定するオプション。'upper' と 'lower' が設定可能。
								</p>
							</td>
						</tr>
					</tbody>
				</table>
				<p class="note">注意: Upload::process() を手動で呼び出す場合、<strong>auto_process</strong> を <strong>false</strong> に設定するようにしてください。そうしないと、ファイルアップロードが二回実行されてファイルが重複することになります。</p>
			</section>

		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2019 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
[ <a href="https://github.com/fuel/docs/commits/1.8/master/classes/upload/config.html">原文コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/commits/1.8/master_japanese/classes/upload/config.html">翻訳コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/blob/1.8/develop_japanese/classes/upload/config.html">GitHubで修正</a> ]
			</p>
		</footer>
	</div>
</body>
</html>
