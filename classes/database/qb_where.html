<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../../assets/css/combined.css?20190627">
	<link rel="shortcut icon" href="./../../favicon.ico" />
	<script src="https://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../../';
		var class_prefix = 'Query_Builder_Where::';
	</script>
	<script src="./../../assets/js/combined.js?20190627"></script>
	<title>Query Builder Where - クラス - FuelPHP ドキュメント</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<div id="cse">
					<gcse:searchbox-only newWindow="true"></gcse:searchbox-only>
				</div>
				<h1>
					<a href="https://fuelphp.com"><img height="37px" width="147px" src="./../../assets/img/fuel.png" /></a>
					<strong>Documentation</strong>
				</h1>
			</div>
			<nav>
				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">目次</a>
			<div class="clear"></div>
		</header>

		<div id="main">

			<h2 id="introduction">Query_Builder_Where クラス</h2>

			<p>
				<strong>Query_Builder_Where</strong> クラスは、クエリ構築における条件及び制限を設定するロジックを扱います。
				すべての種類の where ステートメント (BETWEEN や IN などを含む) はここで扱います。このクラスは、抽象クラスのためインスタンスは生成できず、同じ機能を共有する他のクラスに継承されます。 
				それらのクラスは次のとおりです。:
			</p>

			<ul>
				<li><a href="qb_select.html">Query_Builder_Select</a></li>
				<li><a href="qb_update.html">Query_Builder_Update</a></li>
				<li><a href="qb_delete.html">Query_Builder_Delete</a></li>
			</ul>

			<p id="returned_instance" class="note">
				<strong>注意:</strong> Query_Builder_Where は上記のクラスから継承されるため、 "現在のインスタンス" はそれらの 1 つが返却されます。
			</p>

			<article>
				<h4 class="method" id="method_where">where()</h4>
				<p><strong>where</strong> メソッドは <a href="#method_and_where">and_where</a> のエイリアスです。</p>
			</article>

			<article>
				<h4 class="method" id="method_and_where">and_where($column, $op = null, $value = null)</h4>
				<p><strong>and_where</strong> メソッドは、 WHERE ステートメントを追加します。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>型</th>
										<th>デフォルト</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$column</kbd></th>
										<td><em>mixed</em></td>
										<td><em>必須</em></td>
										<td>カラム名か、 array($column, $alias) 、オブジェクト、もしくはコールバック</td>
									</tr>
									<tr>
										<th><kbd>$op</kbd></th>
										<td><em>string</em></td>
										<td><pre class="php"><code>null</code></pre></td>
										<td>論理演算子: =, !=, IN, BETWEEN と LIKE 。何も提供されていない場合、 '=' が使われます。</td>
									</tr>
									<tr>
										<th><kbd>$value</kbd></th>
										<td><em>string</em></td>
										<td><pre class="php"><code>null</code></pre></td>
										<td>カラムの値</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// 最初の where ステートメントをセット
$query->where('name', '!=', 'John');

// あたらしい条件を追加
$query->and_where('surname', 'Doe');

// ネストした where をコールバックで
$query->where(function($query){
	$query->where('email', 'jim@jim.com')
		->or_where('email', 'haha@joke.com');
});

// 実行結果:
// SELECT * FROM `users` WHERE `name` != "John" AND `surname` = "Doe"
// AND (`email` = "jim@jim.com" OR `email` = "haha@joke.com")
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_or_where">or_where($column, $op = null, $value = null)</h4>
				<p><strong>or_where</strong> メソッドは OR WHERE ステートメントを追加します。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>型</th>
										<th>デフォルト</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$column</kbd></th>
										<td><em>string</em></td>
										<td><em>必須</em></td>
										<td>カラム名か、 array($column, $alias) 、オブジェクト、もしくはコールバック</td>
									</tr>
									<tr>
										<th><kbd>$op</kbd></th>
										<td><em>string</em></td>
										<td><pre class="php"><code>null</code></pre></td>
										<td>論理演算子: =, !=, IN, BETWEEN 。何も提供されていない場合、 '=' が使われます。</td>
									</tr>
									<tr>
										<th><kbd>$value</kbd></th>
										<td><em>string</em></td>
										<td><pre class="php"><code>null</code></pre></td>
										<td>カラムの値</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// 最初の where ステートメントをセット
$query->where('name', '=', 'John');

// あたらしい条件を追加
$query->or_where('surname', 'Doe');

// ネストした where をコールバックで
$query->or_where(function($query){
	$query->where('email', 'jim@jim.com')
		->and_where('id', 4);
});

// 実行結果:
// SELECT * FROM `users` WHERE `name` != "John" OR `surname` = "Doe"
// OR (`email` = "jim@jim.com" AND `id` = 4)
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_where_open">where_open()</h4>
				<p><strong>where_open</strong> メソッドは、 <a href="#method_and_where_open">and_where_open</a> のエイリアスです。</p>
			</article>

			<article>
				<h4 class="method" id="method_and_where_open">and_where_open()</h4>
				<p><strong>and_where_open</strong> メソッドは、 SQL クロージャ を開き、それを AND で追加します。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<em>なし</em>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// where ステートメントをセット
$query->where('name', 'john');

// クロージャを開く
$query->and_where_open();

// SELECT * FROM `users` WHERE `name` = "John" AND (
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_or_where_open">or_where_open()</h4>
				<p><strong>or_where_open</strong> メソッドは SQL クロージャを開き、それを OR で追加します。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<em>なし</em>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// where ステートメントをセット
$query->where('name', 'john');

// クロージャを開く
$query->or_where_open();

// SELECT * FROM `users` WHERE `name` = "John" OR (
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_where_close">where_close()</h4>
				<p><strong>where_close</strong> メソッドは <a href="#method_and_where_close">and_where_close</a> のエイリアスです。</p>
			</article>

			<article>
				<h4 class="method" id="method_and_where_close">and_where_close()</h4>
				<p><strong>and_where_close</strong> メソッドは、 SQL クロージャを閉じます。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<em>なし</em>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// where ステートメントをセット
$query->where('email', 'like', '%@example.com');

// クロージャを開く
$query->and_where_open();

// where ステートメントをセット
$query->where('name', 'John');
$query->or_where('surname', 'Doe');

$query->and_where_close();
// SELECT * FROM `users`
// WHERE `email` LIKE "%example.com" AND (`name` = "John" OR `surname` = "Doe")
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_or_where_close">or_where_close()</h4>
				<p><strong>or_where_close</strong> メソッドは、 SQL クロージャを閉じます。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<em>なし</em>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// where ステートメントをセット
$query->where('email', 'like', '%@example.com');

// クロージャを開く
$query->or_where_open();

// where ステートメントをセット
$query->where('name', 'John');
$query->and_where('surname', 'Doe');

$query->or_where_close();
// SELECT * FROM `users` WHERE `email` LIKE "%example.com" OR (`name` = "John" AND `surname` = "Doe")
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_order_by">order_by($column, $direction = NULL)</h4>
				<p><strong>order_by</strong> メソッドは、結果/実行の順序をセットします。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>型</th>
										<th>デフォルト</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$column</kbd></th>
										<td><em>string</em></td>
										<td><em>必須</em></td>
										<td>カラム名</td>
									</tr>
									<tr>
										<th><kbd>$direction</kbd></th>
										<td><em>string</em></td>
										<td><em>null</em></td>
										<td> <em>'asc'</em> もしくは <em>'desc'</em> が指定可能です。</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// order by をセット
$query->order_by('name');
$query->order_by('email', 'asc');
$query->order_by('surname', 'desc');

// SELECT * FROM `users` ORDER BY `name`, `email` ASC, `surname DESC
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

			<article>
				<h4 class="method" id="method_limit">limit($number)</h4>
				<p><strong>limit</strong> メソッドは、 取得/更新する、レコード数の上限をセットします。</p>
				<table class="method">
					<tbody>
						<tr>
							<th>静的</th>
							<td>いいえ</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>型</th>
										<th>デフォルト</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$number</kbd></th>
										<td><em>int</em></td>
										<td><em>必須</em></td>
										<td>行数</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td><a href="#returned_instance">現在のインスタンス</a>を返します。</td>
						</tr>
						<tr>
							<th>例</th>
							<td>
								<pre class="php"><code>// select 文を準備
$query = DB::select('*')->from('users');

// limit 句をセット
$query->limit(10);

// SELECT * FROM `users` LIMIT 10
</code></pre>
							</td>
						</tr>
					</tbody>
				</table>
			</article>

		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2019 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
[ <a href="https://github.com/fuel/docs/commits/1.8/master/classes/database/qb_where.html">原文コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/commits/1.8/master_japanese/classes/database/qb_where.html">翻訳コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/blob/1.8/develop_japanese/classes/database/qb_where.html">GitHubで修正</a> ]
			</p>
		</footer>
	</div>
</body>
</html>
